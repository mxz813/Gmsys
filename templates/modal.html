
{% block modal %}
    <!-- Modal -->
    <form action="/todolist/" method="post" id="addtodo_form" name="addtodo_form">
        <div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">修改事项内容</h4>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="id" name="id" value="">
                        <textarea class="form-control" name="todotext" rows="5" id="todotext"></textarea>

                        <label class="sr-only" for="nember_name">job</label>
                        <select class="selectpicker" title="请选择工作类型" id="work_type_modal" name="work_type_modal">

                            <option value="0">日常工作</option>
                            <option value="1">安全管理</option>
                            <option value="2">生产管理</option>
                            <option value="3">质量管理</option>
                            <option value="4">综合管理</option>
                            <option value="5">物资管理</option>
                            <option value="6">宣传工作</option>

                        </select>


                        <label class="sr-only" for="priority">priority</label>
                        <select class="selectpicker" title="请选择优先级" id="priority_modal" name="priority_modal">
                            <option value="1">重要</option>
                            <option value="2">一般</option>
                            <option value="3">日常</option>
                        </select>


                        <label class="sr-only" for="nember_name">member name</label>
                        <select class="selectpicker" id="member_name_modal" name="member_name_modal" multiple title="请选择组员">
                            {% for all_username in all_usernames %}
                                <option value="{{ all_username.nick_name }}">{{ all_username.nick_name }}</option>
                            {% endfor %}
                        </select>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">保存修改</button></a>
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>
        {% csrf_token %}
    </form>
{% endblock %}
{% block script %}
<script type="text/javascript">

    //触发模态框的同时调用此方法

function values(ID) {
    $("#id").val(ID);
    var ID= ID
    //获取变量
    var div_body = document.getElementById(ID+"-panel-body").innerHTML;
    var lab_priority = document.getElementById(ID+"-panel-priority").innerHTML;
    var lab_worktype = document.getElementById(ID+"-panel-worktype").innerHTML;
    //出去空格
   var str = div_body.replace(/^\s+|\s+$/g,"");
    //向模态框中传值
    $('#todotext').val(str);
    $('#priority_modal').selectpicker('val', lab_priority);
    $('#work_type_modal').selectpicker('val', lab_worktype);

}

</script>

{% endblock %}
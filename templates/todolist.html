<!-- extends表明此页面继承自 base.html 文件 -->
{% extends "base.html" %}

<!-- 写入 base.html 中定义的 title -->
{% block title %}
    Todolist-ATS工班
{% endblock title %}

<!-- 写入 base.html 中定义的 content -->
{% block content %}
    <div class="container">
        <!-- Main component for a primary marketing message or call to action -->

        <div class="row">

            <form action="{% url 'todolist' %}" method="post" id="addtodo_form" name="addtodo_form">
                <div class="well">
                    <div class="form-group">
                        <label class="sr-only" for="add_todo">add todo</label>
                        <textarea class="form-control" id="add_todo" name="add_todo" placeholder="添加事项" rows="5"
                        ></textarea>
                    </div>
                    <div class="form-inline">
                        <div class="form-group">
                            <label class="sr-only" for="nember_name">job</label>
                            <select class="selectpicker" title="请选择工作类型" id="work_type" name="work_type">

                                <option value="0">日常工作</option>
                                <option value="1">安全管理</option>
                                <option value="2">生产管理</option>
                                <option value="3">质量管理</option>
                                <option value="4">综合管理</option>
                                <option value="5">物资管理</option>
                                <option value="6">宣传工作</option>

                            </select>
                        </div>
                        <div class="form-group">
                            <label class="sr-only" for="priority">priority</label>
                            <select class="selectpicker" title="请选择优先级" id="priority" name="priority">
                                <option value="1">重要</option>
                                <option value="2">一般</option>
                                <option value="3">日常</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="sr-only" for="nember_name">member name</label>
                            <select class="selectpicker" id="member_name" name="member_name" multiple title="请选择执行人"
                                    data-actions-box="true">
                                {% for all_username in all_usernames %}
                                    <option value="{{ all_username.nick_name }}">{{ all_username.nick_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group pull-right">
                            <button class="btn btn-default" type="submit">＋</button>
                        </div>
                    </div>
                </div>

                {% csrf_token %}
            </form>
            <!-- 告警信息!-->
            {% if msg != null %}
                <div class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <p class="text-center"><strong>{{ msg }}</strong></p>
                </div>
            {% endif %}

            <div class="well">
                <div>
                    <button type="button" class="btn btn-default {% ifequal is_done '' %}active{% endifequal %}"><a
                            href="?wt={{ work_type }}&pr={{ priority }}"><span>全部</span></a>
                    </button>
                    <button type="button" class="btn btn-default {% ifequal is_done '0' %}active{% endifequal %}"><a
                            href="?isd=0&wt={{ work_type }}&pr={{ priority }}"
                            ><span>未完成</span></a></button>
                    <button type="button" class="btn btn-default {% ifequal is_done '1' %}active{% endifequal %}"><a
                            href="?isd=1&wt={{ work_type }}&pr={{ priority }}"
                            ><span>已完成</span></a></button>
                </div>
                <div>
                    <button type="button" class="btn btn-default {% ifequal priority '' %}active{% endifequal %}"><a
                            href="?wt={{ work_type }}&isd={{ is_done }}"><span>全部</span></a></button>
                    <button type="button" class="btn btn-default {% ifequal priority '1' %}active{% endifequal %}"><a
                            href="?pr=1&wt={{ work_type }}&isd={{ is_done }}"><span>重要</span></a></button>
                    <button type="button" class="btn btn-default {% ifequal priority '2' %}active{% endifequal %}"><a
                            href="?pr=2&wt={{ work_type }}&isd={{ is_done }}"><span>一般</span></a></button>
                    <button type="button" class="btn btn-default {% ifequal priority '3' %}active{% endifequal %}"><a
                            href="?pr=3&wt={{ work_type }}&isd={{ is_done }}"><span>日常</span></a></button>
                </div>
                <div>
                    <button type="button" class="btn btn-default {% ifequal work_type '' %}active{% endifequal %}"><a
                            href="?pr={{ priority }}&isd={{ is_done }}"><span>全部</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '0' %}active{% endifequal %}"><a
                            href="?wt=0&pr={{ priority }}&isd={{ is_done }}"><span>日常工作</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '1' %}active{% endifequal %}"><a
                            href="?wt=1&pr={{ priority }}&isd={{ is_done }}"><span>安全管理</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '2' %}active{% endifequal %}"><a
                            href="?wt=2&pr={{ priority }}&isd={{ is_done }}"><span>生产管理</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '3' %}active{% endifequal %}"><a
                            href="?wt=3&pr={{ priority }}&isd={{ is_done }}"><span>质量管理</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '4' %}active{% endifequal %}"><a
                            href="?wt=4&pr={{ priority }}&isd={{ is_done }}"><span>综合管理</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '5' %}active{% endifequal %}"><a
                            href="?wt=5&pr={{ priority }}&isd={{ is_done }}"><span>物资管理</span></a></button>
                    <button type="button" class="btn btn-default{% ifequal work_type '6' %}active{% endifequal %}"><a
                            href="?wt=6&pr={{ priority }}&isd={{ is_done }}"><span>宣传工作</span></a></button>
                </div>

            </div>

            <!-- Button trigger modal -->
            <div class="well">

                {% for todo in all_todo.object_list %}
                    {#                    {% ifequal todo.is_done 0 %}#}
                    <label class="sr-only" id="{{ todo.id }}-panel-priority">{{ todo.priority }}</label>
                    <div class="panel
                            {% ifequal todo.priority 1 %}panel-danger{% endifequal %}
                            {% ifequal todo.priority 2 %}panel-info{% endifequal %}
                            {% ifequal todo.priority 3 %}panel-success{% endifequal %}"
                         id="panel-priority">
                        <!-- Button trigger modal -->

                        <span><button type="button"
                                      class="btn btn-default btn-sm pull-right glyphicon glyphicon-remove"
                                      onclick="values({{ todo.id }})" data-toggle="modal"
                                      data-target="#RemoveModal.bs-example-modal-sm"></button></span>

                        <span><button type="button" class="btn btn-default btn-sm pull-right glyphicon glyphicon-ok"
                                      onclick="donevalues({{ todo.id }})" data-toggle="modal"
                                      data-target="#DoneModal.bs-example-modal-sm"></button></span>
                        <span><button type="button"
                                      class="btn btn-default btn-sm pull-right glyphicon glyphicon-edit"
                                      data-toggle="modal" data-target="#myModal.bs-example-modal-lg"
                                      onclick="values({{ todo.id }})"></button></span>
                        <div class="panel-heading">
                            <label class="sr-only" id="{{ todo.id }}-panel-worktype">{{ todo.work_type }}</label>
                            <h3 class="panel-title">
                                {% ifequal todo.work_type "0" %}日常工作{% endifequal %}
                                {% ifequal todo.work_type "1" %}安全管理{% endifequal %}
                                {% ifequal todo.work_type "2" %}生产管理{% endifequal %}
                                {% ifequal todo.work_type "3" %}质量管理{% endifequal %}
                                {% ifequal todo.work_type "4" %}综合管理{% endifequal %}
                                {% ifequal todo.work_type "5" %}物资管理{% endifequal %}
                                {% ifequal todo.work_type "6" %}宣传工作{% endifequal %}</h3>
                        </div>
                        <div class="panel-body" id="{{ todo.id }}-panel-body">
                            {{ todo.contents|linebreaksbr }}
                        </div>
                        <div class="panel-footer" id="{{ todo.id }}-member-name">执行人：{{ todo.member_name }}</div>
                    </div>
                    {#                    {% endifequal %}#}
                {% endfor %}
                <nav aria-label="Page navigation" class="text-center">
                    <ul class="pagination">
                        <li>
                            {% if all_todo.has_previous %}
                                <li class="disabled"><a href="?{{ all_todo.previous_page_number.querystring }}"
                                                        aria-label="Previous"><span
                                        aria-hidden="true">&laquo;</span></a></li>
                            {% endif %}

                        {% for page in all_todo.pages %}
                            {% if page %}
                                {% ifequal page all_todo.number %}
                                    <li class="active"><a href="?{{ page.querystring }}">{{ page }} <span
                                            class="sr-only">{{ page }}</span></a></li>
                                {% else %}
                                    <li><a href="?{{ page.querystring }}" class="page">{{ page }}</a></li>
                                {% endifequal %}
                            {% else %}
                                <li><a href="">...</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if all_todo.has_next %}
                            <li>
                                <a href="?{{ all_todo.next_page_number.querystring }}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        {% endif %}
                        </li>
                    </ul>
                </nav>
            </div>
            <!-- Button trigger modal -->
            {#            <div class="well col-md-6">#}
            {#                <div class="panel panel-default">#}
            {#                    <div class="panel-body text-center">#}
            {#                        <b>Done</b>#}
            {#                    </div>#}
            {#                </div>#}
            {##}
            {#                {% for todo in all_todo.object_list %}#}
            {#                    {% ifequal todo.is_done 1 %}#}
            {#                        <div class="panel#}
            {#                            {% ifequal todo.priority 1 %}panel-danger{% endifequal %}#}
            {#                            {% ifequal todo.priority 2 %}panel-info{% endifequal %}#}
            {#                            {% ifequal todo.priority 3 %}panel-success{% endifequal %}">#}
            {##}
            {#                            <!-- Button trigger modal -->#}
            {#                            <span><button type="button"#}
            {#                                          class="btn btn-default btn-sm pull-right glyphicon glyphicon-remove"#}
            {#                                          onclick="doneremovevalues({{ todo.id }})" data-toggle="modal"#}
            {#                                          data-target="#RemoveModal.bs-example-modal-sm"></button></span>#}
            {#                            <span><button type="button"#}
            {#                                          class="btn btn-default btn-sm pull-right glyphicon glyphicon-repeat"#}
            {#                                          onclick="retodovalues({{ todo.id }})" data-toggle="modal"#}
            {#                                          data-target="#RetodoModal.bs-example-modal-sm"></button></span>#}
            {#                            <div class="panel-heading">#}
            {#                                <h3 class="panel-title">#}
            {#                                    {% ifequal todo.work_type "0" %}日常工作{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "1" %}安全管理{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "2" %}生产管理{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "3" %}质量管理{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "4" %}综合管理{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "5" %}物资管理{% endifequal %}#}
            {#                                    {% ifequal todo.work_type "6" %}宣传工作{% endifequal %}#}
            {#                                </h3>#}
            {#                            </div>#}
            {#                            <div class="panel-body" id="panel-body">#}
            {#                                {{ todo.contents }}#}
            {#                            </div>#}
            {#                            <div class="panel-footer">执行人：{{ todo.member_name }}</div>#}
            {#                        </div>#}
            {#                    {% endifequal %}#}
            {#                {% endfor %}#}
            {#            </div>#}
        </div>
        <!-- container end -->


    </div>

    {% include "modal.html" %}
{% endblock content %}


